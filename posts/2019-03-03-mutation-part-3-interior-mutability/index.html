<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=//gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.54.0"><meta name=viewport content="width=device-width,initial-scale=1"><title>Mutation - part 3: Interior Mutability &middot; Another one bytes the Rust!</title><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/prev-next_buttons.css><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/inline_svgs.css><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/print.css media=print><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/poole.css><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/syntax.css><link type=text/css rel=stylesheet href=https://danielhenrymantilla.github.io/css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=/favicon.png><link href rel=alternate type=application/rss+xml title="Another one bytes the Rust!"></head><body class="theme-base-08 layout-reverse"><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a href=https://danielhenrymantilla.github.io/><h1>Another one bytes the Rust!</h1></a><p class=lead>Thoughts and ramblings for the like-minded</p></div><nav><ul class=sidebar-nav><li><a href=https://danielhenrymantilla.github.io/>Home</a></li><li><a href=/series>Blog Post Series</a></li><li><a href=/categories>Categories</a></li><li><a href=/tags>Tags</a></li></ul></nav><p>&copy; 2019. All rights reserved.</p></div></aside><main class="content container"><div class=prev-next><a class="prev-next-link prev-link" href=/posts/2019-02-24-mutation-part-2-to-mut-or-not-to-mut/><button class="button prev-button">
<span>Prev post</span></button></a></div><div class=post><h1>Mutation - part 3: Interior Mutability</h1><time datetime=2019-03-03T23:28:36&#43;0100 class=post-date>Sun, Mar 3, 2019</time><h1 id=interior-mutability>Interior Mutability</h1><h2 id=unsafecell-and-interior-mutability><code>&amp;UnsafeCell&lt;_&gt;</code> and &ldquo;Interior Mutability&rdquo;</h2><p>From the previous post, we have the following safe tranformation</p><blockquote><p><code>&amp;UnsafeCell&lt;T&gt; -&gt; *mut T</code></p></blockquote><p>So, <code>UnsafeCell&lt;_&gt;</code> wraps data and provides a handle to its interior, with which we can mutate the wrapped data; in other words, <strong>the <em>interior</em> of the wrapper is <em>mutable</em></strong>.</p><p><img src=https://i.imgflip.com/2v22n0.jpg alt="Interior Mutability"></p><h3 id=safe-abstractions-built-on-top-of-unsafecell>Safe abstractions built on top of <code>UnsafeCell</code></h3><table><thead><tr><th align=center></th><th align=center><code>!Sync</code></th><th align=center><code>Sync</code></th></tr></thead><tbody><tr><td align=center><code>T</code></td><td align=center><code>RefCell&lt;T&gt;</code></td><td align=center><code>RwLock&lt;T&gt;</code> / <code>Mutex&lt;T&gt;</code></td></tr><tr><td align=center>integer</td><td align=center><code>Cell&lt;usize&gt;</code> / <code>Cell&lt;isize&gt;</code></td><td align=center><code>AtomicUsize</code> / <code>AtomicIsize</code></td></tr><tr><td align=center><code>T : Copy</code></td><td align=center><code>Cell&lt;T&gt;</code></td><td align=center>NO</td></tr><tr><td align=center>pointer</td><td align=center><code>Cell&lt;*mut T&gt;</code></td><td align=center><code>AtomicPtr</code></td></tr></tbody></table><h1 id=tbd>TBD</h1></div><div class=prev-next><a class="prev-next-link prev-link" href=/posts/2019-02-24-mutation-part-2-to-mut-or-not-to-mut/><button class="button prev-button">
<span>Prev post</span></button></a></div></main></body></html>